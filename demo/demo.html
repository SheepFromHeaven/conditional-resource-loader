<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Demo for conditional loader</title>
		<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
		<script src="../src/resourceLoader.js"></script>
		<script>
			$(document).ready(function(){
				console.log('domReady fired!');

				$(window).on('resourcesReady', function() {
					console.log('ressourcesReady fired!');

					//initiazlie components with data-init attribute
					 $('*[data-init]').each(function() {
						 var init = eval($(this).attr('data-init'));
						 init($(this));
					 });
				});

				resourceLoader({
					base: 'resources/',
					baseMap: {
						'##content': 'resources-content/'
					}
				});
			});
		</script>
	</head>
	<body>
		<div class="demo1" data-init="(function($elm) { $elm.plugin(); })" data-resources="[{test: (function() {return true;}), paths: ['js/jquery.plugin.js', 'css/demo.css', 'css/demo1.css']}]">
			This component's resources (css and js) are loaded via conditional loader!
		</div>

		<div class="demo2" data-init="(function($elm) { $elm.plugin(); })" data-resources="[{paths: ['/demo/resources/js/jquery.plugin.js', '/demo/resources/css/demo.css']}, {paths: ['css/demo2.css'], base: '##content'}]">
			This component's resources are loaded via conditional loader, using relative and absolute paths.
		</div>
	</body>
</html>
